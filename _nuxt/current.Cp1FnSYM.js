import{u as C,i as $,M as B,G as M,m as P,a as G,b as E,c as L,_ as O}from"./state.CXZpWh2Y.js";import{n as I,r as x,q as R,g as U,o as a,c as i,s as z,u as F,v as V,a as e,t as h,b as _,w as A,F as j,x as H,y as o,z as f,A as S,B as N,_ as q}from"./entry.Cm0VTAwn.js";const D=I({__name:"MarketInput",props:{value:{}},emits:["update"],setup(g,{emit:u}){const d=g,b=x(),m=u,r=x(d.value.toString()),p=()=>{b.value&&(b.value.value=r.value)};R(()=>{p()}),U(()=>d.value,s=>{r.value=s.toString(),p()});const y=s=>{if(!(s.target instanceof HTMLInputElement))return;const t=s.target.value;(t===""||/^\d+$/.test(t))&&(r.value=t),p()},v=()=>{const s=r.value.trim()===""?0:parseInt(r.value,10);r.value=s.toString(),m("update",s)};return(s,t)=>(a(),i("input",{ref_key:"inputRef",ref:b,onInput:y,onBlur:v,maxlength:"10",class:"inputForm text-white"},null,544))}}),J={class:"market-header text-center"},K={class:"text-yellow-200 text-7xl"},Q={class:"table-wrapper"},W=e("div",{class:"grid grid-nogutter table-header"},[e("div",{class:"table-header-content flex align-items-center justify-content-center col-goods"},[e("span",{class:"pi pi-sort-icon-goods"})]),e("div",{class:"table-header-content flex align-items-center justify-content-center col-order"},[e("span",{class:"text-orange-200"},"売り注文")]),e("div",{class:"table-header-content flex align-items-center justify-content-center col-order"},[e("span",{class:"text-orange-200"},"買い注文")]),e("div",{class:"table-header-content flex align-items-center justify-content-center col-balance"},[e("span",{class:"text-white"},"収支")]),e("div",{class:"table-header-content flex align-items-center justify-content-center col-price"},[e("span",{class:"text-orange-200"},"市場価格")])],-1),X={class:"table-row-content flex align-items-center justify-content-center col-goods"},Y=e("div",{class:"table-row-content flex align-items-center justify-content-end col-order right-border"},[e("span",{class:"text-white mr-2"},"-")],-1),Z=e("div",{class:"table-row-content flex align-items-center justify-content-end col-order right-border"},[e("span",{class:"text-white mr-2"},"-")],-1),ee={class:"table-row-content flex justify-content-center col-balance right-border"},te={class:"table-row-content flex justify-content-center col-price grid grid-nogutter"},ne={class:"col-6 flex flex-wrap align-items-center justify-content-end"},ae={class:"flex flex-wrap align-items-center"},se=e("span",{class:"pi pi-money s-icon"},null,-1),le={class:"text-white mr-1"},oe={class:"col-6",style:{height:"100",display:"block"}},ce={class:"table-row-content flex align-items-center justify-content-center col-goods"},ie={class:"table-row-content flex align-items-center justify-content-end col-order right-border"},re={key:1,class:"text-white mr-2"},de={class:"table-row-content flex align-items-center justify-content-end col-order right-border"},ue={key:1,class:"text-white mr-2"},pe={class:"table-row-content flex justify-content-center col-balance right-border"},fe={class:"table-row-content flex justify-content-center col-price grid grid-nogutter"},_e={class:"col-6 flex flex-wrap align-items-center justify-content-end"},be={class:"flex flex-wrap align-items-center"},me=e("span",{class:"pi pi-money s-icon"},null,-1),he={class:"text-white mr-1"},ge={class:"col-6",style:{height:"100",display:"block"}},ye=I({__name:"MarketPanel",props:{title:{},editable:{type:Boolean}},setup(g){const u=g,d=x(0),b=x(),m=C(),{marketArray:r}=z(m),p=t=>{const l=.13636363636363635;for(let c=0;c<12;c++)if(t<=-.75+l*c)return"pi-coin-"+(c+1).toString().padStart(2,"0");return"pi-coin-13"},y=t=>{const l=Math.floor(t*100);return l==0?"0 %":l>0?`+ ${l} %`:`- ${-l} %`},v=t=>G(t)?"table-industrial-row":E(t)?"table-luxury-row":L(t)?"table-military-row":"table-staple-row";R(()=>{var l;const t=(l=document.getElementById("main-panel"))==null?void 0:l.getBoundingClientRect().top;d.value=t??0});const s=F(()=>window?{height:`${window.innerHeight-d.value}px`}:void 0);return(t,l)=>{const c=O,w=D,T=V("ScrollPanel");return a(),i("div",{class:"market-panel",ref_key:"panelElem",ref:b},[e("div",J,[e("span",K,h(u.title),1)]),_(T,{class:"main-panel",id:"main-panel",style:N(o(s))},{default:A(()=>[e("div",Q,[W,(a(!0),i(j,null,H(o(r),n=>(a(),i(j,null,[("isOnlyState"in t?t.isOnlyState:o($))(n.id)?(a(),i("div",{key:0,class:f(["grid grid-nogutter table-row",v(n.id)])},[e("div",X,[e("span",{class:f(["pi",("MarketIconTable"in t?t.MarketIconTable:o(B))[n.id]])},null,2)]),Y,Z,e("div",ee,[_(c,{label:"0",balance:0})]),e("div",te,[e("div",ne,[e("div",ae,[se,e("span",le,h(("GoodsTable"in t?t.GoodsTable:o(M))[n.id].baseCost),1),e("span",{class:f(["pi xs-icon",p(("marketBalanceRate"in t?t.marketBalanceRate:o(P))(0,0))])},null,2)])]),e("div",oe,[_(c,{label:y(0),balance:0},null,8,["label"])])])],2)):(a(),i("div",{key:1,class:f(["grid grid-nogutter table-row",v(n.id)])},[e("div",ce,[e("span",{class:f(["pi",("MarketIconTable"in t?t.MarketIconTable:o(B))[n.id]])},null,2)]),e("div",ie,[u.editable?(a(),S(w,{key:0,value:n.sell,onUpdate:k=>o(m).updateSell(n.id,k)},null,8,["value","onUpdate"])):(a(),i("span",re,h(n.sell),1))]),e("div",de,[u.editable?(a(),S(w,{key:0,value:n.buy,onUpdate:k=>o(m).updateBuy(n.id,k)},null,8,["value","onUpdate"])):(a(),i("span",ue,h(n.buy),1))]),e("div",pe,[_(c,{label:n.balanceLabel,balance:n.balanceRate},null,8,["label","balance"])]),e("div",fe,[e("div",_e,[e("div",be,[me,e("span",he,h(Math.floor(("GoodsTable"in t?t.GoodsTable:o(M))[n.id].baseCost*(1+n.marketBalanceRate)+.5)),1),e("span",{class:f(["pi xs-icon",p(n.marketBalanceRate)])},null,2)])]),e("div",ge,[_(c,{label:y(n.marketBalanceRate),balance:n.marketBalanceRate/.75*.5},null,8,["label","balance"])])])],2))],64))),256))])]),_:1},8,["style"])],512)}}}),ve={},xe={class:"flex flex-nowrap"};function ke(g,u){const d=ye;return a(),i("div",xe,[_(d,{title:"現在市場",editable:""})])}const Me=q(ve,[["render",ke]]);export{Me as default};
